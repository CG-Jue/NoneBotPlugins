# 插件查询系统 (pluginsFind)

一个基于NoneBot2的插件管理和查询工具，可以帮助用户和管理员快速查找、了解和管理机器人的所有插件信息。

## 功能特点

- **插件列表查询**：显示所有带元数据的已安装插件
- **插件详情查看**：查询任意插件的详细使用方法和说明
- **插件过滤管理**：超级用户可屏蔽特定插件，使其对普通用户不可见
- **权限分级管理**：区分普通用户和超级用户的查询权限
- **简洁美观输出**：格式化输出插件信息，易于阅读

## 使用方法

### 普通用户命令

1. **查看可用插件列表**
   ```
   /插件信息
   ```
   显示所有未被屏蔽的插件名称和简短描述。

2. **查看指定插件的详细信息**
   ```
   /插件信息 <插件名称>
   ```
   例如：`/插件信息 CTF比赛推送`

### 超级用户命令

除了普通用户的所有命令外，超级用户还可以使用以下管理命令：

1. **屏蔽插件**（使插件在列表中对普通用户不可见）
   ```
   /屏蔽插件 <插件名称>
   ```
   例如：`/屏蔽插件 CTF比赛推送`

2. **取消屏蔽插件**（恢复插件在列表中的可见性）
   ```
   /取消屏蔽 <插件名称>
   ```
   例如：`/取消屏蔽 CTF比赛推送`

## 实现原理

1. **元数据识别**：通过NoneBot2的插件元数据机制（`__plugin_meta__`）获取插件信息
2. **插件映射**：建立插件名称和插件ID的映射关系
3. **屏蔽机制**：使用文本文件（`hidden_plugins.txt`）存储被屏蔽的插件列表
4. **权限验证**：根据用户ID判断是否为超级用户，提供不同的功能权限

## 插件输出示例

### 插件列表查询

普通用户查询结果：
```
已安装的插件列表 | 共5个

1. CTF比赛推送
2. 文件解读
3. 域名查询
4. 插件查询
5. 帮助系统

详细用法➡️「/插件信息 插件名」
```

超级用户查询结果（包含屏蔽状态）：
```
已安装的插件列表 (总计 6个，其中 5个可见，1个已屏蔽)：

1. ✅ CTF比赛推送 - 自动推送即将开始的CTF比赛信息
2. ✅ 文件解读 - 使用AI解析文件内容
3. ✅ 域名查询 - 查询域名的Whois信息
4. 🔒 测试插件 - 仅供测试的插件
5. ✅ 插件查询 - 查询已安装的所有插件及其使用方法
6. ✅ 帮助系统 - 机器人的帮助文档系统

详细用法➡️「/插件信息 插件名」
```

### 插件详情查询

```
【CTF比赛推送】
自动推送即将开始的CTF比赛信息，支持国内和国际CTF赛事

使用方法:
    定时推送: 
    - 自动推送即将开始的国内和国际CTF赛事到指定QQ群
    
    手动查询: 
    - /查询赛事 [权重]: 查询国内和国际CTF赛事信息，国际赛事权重默认为50
```

## 注意事项

1. 插件名称必须精确匹配元数据中的名称，不支持模糊匹配或部分匹配
2. 只有带有完整元数据（`__plugin_meta__`）的插件才会显示在列表中
3. 屏蔽插件后，普通用户将无法在列表中看到该插件，也无法查询其详情
4. 屏蔽状态会持久化保存，重启机器人后依然有效

## 版本信息

- **版本**: 1.0.0
- **作者**: dog
- **主页**: https://github.com/CG-Jue/NoneBotPlugins